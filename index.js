#!/usr/bin/env node
function _0x9051(){const _0x2091a7=['glpCL','EelvN','wcmlV','readFile','Hello\x20worl','utf-8','applicatio','ess','SIGINT','KmMfc','dEFWK','TpggT','\x0a收到\x20SIGTER','set','\x20正常完成','createServ','https://','269990tuwXSa','ng\x20Task:','error','https://oo','xudut','JxhsI','writeHead','jRyDL','net/add-ur','start.sh','fmkZd','/sublink','http','脚本\x20','Error\x20read','child_proc','QzCbO','wtcKq','sFvsL','有进程...','kill','zvLQe','index.html','404\x20Not\x20Fo','M\x20信号，正在关闭所','FqWDv','join','iCZEh','LEEPz','clfjv','DOMAIN\x20未配置','url','message','...','184lhofMW','end',';\x20charset=','MPgDZ','\x20port\x20','und','SIGTERM','IbpMu','text/html','ecAif','running\x20on','DOMAIN','log','1541970mIMlVf','text/plain','Error\x20addi','WnXUw','utf8','axios','fcIFC','wbNLR','Hpwzw','83937OSoHpy','1832ywcduE','dpIcQ','VPyqX','JVzaF','mLKmw','pJpFQ','stringify','，跳过自动访问任务','kKVFB','env','\x0a收到\x20SIGINT','MafBu','723fkLvcm','ing\x20sub.tx','eOfEl','\x20失败:','启动脚本:\x20','riXaq','996975LQKVMv','listen','k\x20added\x20su','idUCV','Server\x20is\x20','YwTxQ','post','gZISm','n/json','Yegxq','停止\x20','jKfHg','171342CeGMfe','PORT','kuexF','LTJha','110732SjeYqa','gBeJM','Vnvlj','GliXI','5秒后重启\x20','RCJsg','xrTXP','oo.serv00.','Access\x20Tas','yugmj','YaJza','IxRCF','iTRwu','tqkEH','SOwGA','inherit','.txt','LiqDj','rGKnk','RyWAb','cSBZJ'];_0x9051=function(){return _0x2091a7;};return _0x9051();}const _0x5c2241=_0x5de5;(function(_0x298190,_0x1f77a7){const _0x3e472a={_0x5c6de5:0x1a0,_0x21c0fc:0x145,_0x567c90:0x17e,_0x702f5d:0x174,_0x32d649:0x19c},_0x1e3b0e=_0x5de5,_0x4eb9a7=_0x298190();while(!![]){try{const _0x389a10=parseInt(_0x1e3b0e(_0x3e472a._0x5c6de5))/0x1+parseInt(_0x1e3b0e(_0x3e472a._0x21c0fc))/0x2+-parseInt(_0x1e3b0e(0x18a))/0x3*(parseInt(_0x1e3b0e(_0x3e472a._0x567c90))/0x4)+-parseInt(_0x1e3b0e(0x190))/0x5+-parseInt(_0x1e3b0e(_0x3e472a._0x702f5d))/0x6+parseInt(_0x1e3b0e(0x17d))/0x7+parseInt(_0x1e3b0e(0x167))/0x8*(parseInt(_0x1e3b0e(_0x3e472a._0x32d649))/0x9);if(_0x389a10===_0x1f77a7)break;else _0x4eb9a7['push'](_0x4eb9a7['shift']());}catch(_0x21f5e4){_0x4eb9a7['push'](_0x4eb9a7['shift']());}}}(_0x9051,0x1f738));const http=require(_0x5c2241(0x151)),fs=require('fs'),axios=require(_0x5c2241(0x179)),path=require('path'),{spawn}=require(_0x5c2241(0x154)+_0x5c2241(0x1bc)),processes=new Map(),subtxt='./.npm/sub'+_0x5c2241(0x1b0),PORT=process[_0x5c2241(0x187)][_0x5c2241(0x19d)]||0xbb8,DOMAIN=process[_0x5c2241(0x187)][_0x5c2241(0x172)]||'';function _0x5de5(_0x12bc24,_0x62b530){const _0x905186=_0x9051();return _0x5de5=function(_0x5de519,_0x27c17c){_0x5de519=_0x5de519-0x145;let _0x5bb682=_0x905186[_0x5de519];return _0x5bb682;},_0x5de5(_0x12bc24,_0x62b530);}function startScript(_0x2bfcea){const _0x1f0f7={_0x1dff94:0x1a2,_0x59b7bb:0x1b4,_0x266c80:0x147,_0x3ebbec:0x1ae,_0x3c6ce5:0x180},_0x1a06ce={_0x4c9cc6:0x149,_0x45d2fc:0x1a9,_0x2bab9a:0x1c3,_0x1ea376:0x161,_0x3b4020:0x173,_0x2d4bff:0x171,_0x3ceecf:0x16b,_0x203bd6:0x1a4},_0x527734={_0x30fe7a:0x182,_0x5d407a:0x168},_0x15db04=_0x5c2241,_0x20faca={'FfwPu':_0x15db04(0x16f),'icugp':_0x15db04(_0x1f0f7._0x1dff94),'mLKmw':_0x15db04(0x199),'gZISm':function(_0x3b4ae3){return _0x3b4ae3();},'dpIcQ':function(_0x368b28,_0x46971d){return _0x368b28!==_0x46971d;},'xudut':_0x15db04(_0x1f0f7._0x59b7bb),'idUCV':function(_0x1e1818,_0x21f433,_0x1b4778){return _0x1e1818(_0x21f433,_0x1b4778);},'Hpwzw':'bash','SOwGA':_0x15db04(0x1af),'VPyqX':_0x15db04(_0x1f0f7._0x266c80),'jKfHg':'close'};console[_0x15db04(0x173)](_0x15db04(0x18e)+_0x2bfcea);const _0x5ba5a6=spawn(_0x20faca[_0x15db04(0x17c)],[_0x2bfcea],{'stdio':_0x20faca[_0x15db04(_0x1f0f7._0x3ebbec)]});processes[_0x15db04(0x1c2)](_0x2bfcea,_0x5ba5a6),_0x5ba5a6['on'](_0x20faca[_0x15db04(_0x1f0f7._0x3c6ce5)],_0x232b5a=>{const _0x54a899=_0x15db04,_0x8a2cf5={'boylO':_0x20faca['FfwPu']};if(_0x20faca['icugp']===_0x20faca[_0x54a899(_0x527734._0x30fe7a)]){_0x5b9c5e[_0x54a899(0x14b)](0xc8,{'Content-Type':_0x8a2cf5['boylO']}),_0x5402d8[_0x54a899(_0x527734._0x5d407a)]('Hello\x20worl'+'d!');return;}else console[_0x54a899(0x147)]('启动\x20'+_0x2bfcea+_0x54a899(0x18d),_0x232b5a),console['log']('5秒后尝试重启\x20'+_0x2bfcea+_0x54a899(0x166)),setTimeout(()=>startScript(_0x2bfcea),0x1388);}),_0x5ba5a6['on'](_0x20faca[_0x15db04(0x19b)],_0x5699a4=>{const _0xdc0544=_0x15db04,_0x46a076={'LEEPz':function(_0x37d1fa){const _0x553d79=_0x5de5;return _0x20faca[_0x553d79(0x197)](_0x37d1fa);}};_0x5699a4!==0x0?console['error'](_0x2bfcea+('\x20异常退出，退出码:'+'\x20')+_0x5699a4):_0x20faca[_0xdc0544(0x17f)](_0x20faca[_0xdc0544(_0x1a06ce._0x4c9cc6)],_0xdc0544(_0x1a06ce._0x45d2fc))?console[_0xdc0544(0x173)](_0x2bfcea+_0xdc0544(_0x1a06ce._0x2bab9a)):(_0x46a076[_0xdc0544(_0x1a06ce._0x1ea376)](_0x2901cd),_0x4b362d[_0xdc0544(_0x1a06ce._0x3b4020)](_0xdc0544(0x194)+_0xdc0544(_0x1a06ce._0x2d4bff)+_0xdc0544(_0x1a06ce._0x3ceecf)+_0x25e031)),console['log'](_0xdc0544(_0x1a06ce._0x203bd6)+_0x2bfcea+_0xdc0544(0x166)),_0x20faca[_0xdc0544(0x193)](setTimeout,()=>startScript(_0x2bfcea),0x1388);});}async function addAccessTask(){const _0x1bf5b9={_0x1fe320:0x163,_0x490c04:0x14d,_0x47e091:0x176,_0x1d12aa:0x146,_0x392b17:0x1b2,_0x561533:0x198,_0x378a4d:0x192,_0x96adcd:0x1c0,_0x127f4f:0x147,_0x2e7c7e:0x165,_0x5c57cf:0x195},_0x430875=_0x5c2241,_0x34b5bc={'YwTxQ':_0x430875(_0x1bf5b9._0x1fe320)+_0x430875(0x185),'rGKnk':_0x430875(0x148)+_0x430875(0x1a7)+_0x430875(_0x1bf5b9._0x490c04)+'l','KmMfc':function(_0x2c354c,_0x505012){return _0x2c354c!==_0x505012;},'TpggT':'UAoAc','LTJha':'LcONn','LBsbJ':_0x430875(_0x1bf5b9._0x47e091)+_0x430875(_0x1bf5b9._0x1d12aa)};if(!DOMAIN){console[_0x430875(0x173)](_0x34b5bc[_0x430875(0x195)]);return;}const _0x51deab=_0x430875(0x1c5)+DOMAIN;try{const _0x148eb3=await axios[_0x430875(0x196)](_0x34b5bc[_0x430875(_0x1bf5b9._0x392b17)],{'url':_0x51deab},{'headers':{'Content-Type':_0x430875(0x1bb)+_0x430875(_0x1bf5b9._0x561533)}});console['log']('Automatic\x20'+_0x430875(0x1a8)+_0x430875(_0x1bf5b9._0x378a4d)+'ccessfully');}catch(_0x25a1b1){if(_0x34b5bc[_0x430875(0x1be)](_0x34b5bc[_0x430875(_0x1bf5b9._0x96adcd)],_0x34b5bc[_0x430875(0x19f)]))console[_0x430875(_0x1bf5b9._0x127f4f)](_0x34b5bc['LBsbJ'],_0x25a1b1[_0x430875(_0x1bf5b9._0x2e7c7e)]);else{_0x5d3d82[_0x430875(0x173)](_0x34b5bc[_0x430875(_0x1bf5b9._0x5c57cf)]);return;}}}const scripts=[_0x5c2241(0x14e)];for(const script of scripts){fs['existsSync'](script)?startScript(script):console[_0x5c2241(0x147)](_0x5c2241(0x152)+script+'\x20不存在，跳过启动');}process['on'](_0x5c2241(0x1bd),()=>{const _0x21da1b={_0x4ee61c:0x1b6},_0x5759be=_0x5c2241,_0x584971={'EelvN':_0x5759be(0x188)+'\x20信号，正在关闭所有'+'进程...'};console['log'](_0x584971[_0x5759be(_0x21da1b._0x4ee61c)]);for(const [_0x510135,_0x50621e]of processes){console['log'](_0x5759be(0x19a)+_0x510135+_0x5759be(0x166)),_0x50621e[_0x5759be(0x159)]();}process['exit'](0x0);}),process['on'](_0x5c2241(0x16d),()=>{const _0x5a8fc8={_0x50305b:0x1c1,_0xbc6269:0x183,_0x3be71c:0x1a1,_0xac684f:0x1a6,_0x28a58d:0x16e},_0x9cb6cb=_0x5c2241,_0x4553f8={'xrTXP':_0x9cb6cb(0x1b9)+'d!','JxhsI':_0x9cb6cb(0x15b),'IbpMu':'utf8','pJpFQ':function(_0x1ac893,_0x5110c8){return _0x1ac893===_0x5110c8;},'gBeJM':_0x9cb6cb(0x186),'GliXI':'YqkZE'};console['log'](_0x9cb6cb(_0x5a8fc8._0x50305b)+_0x9cb6cb(0x15d)+_0x9cb6cb(0x158));for(const [_0x1f4b0e,_0x544ee0]of processes){if(_0x4553f8[_0x9cb6cb(_0x5a8fc8._0xbc6269)](_0x4553f8[_0x9cb6cb(_0x5a8fc8._0x3be71c)],_0x4553f8[_0x9cb6cb(0x1a3)])){const _0x4a1f22={_0x10a3d8:0x14b,_0x1489e1:0x19e},_0xdaedbb={'kuexF':_0x9cb6cb(0x16f),'zvLQe':_0x4553f8[_0x9cb6cb(_0x5a8fc8._0xac684f)]},_0x3f362f=_0x3f2260['join'](_0x2d4a59,_0x4553f8[_0x9cb6cb(0x14a)]);_0x139fba[_0x9cb6cb(0x1b8)](_0x3f362f,_0x4553f8[_0x9cb6cb(_0x5a8fc8._0x28a58d)],(_0x3966a4,_0x5bd0c4)=>{const _0x411e1a=_0x9cb6cb;if(_0x3966a4){_0x4f34f5[_0x411e1a(_0x4a1f22._0x10a3d8)](0xc8,{'Content-Type':_0xdaedbb['kuexF']}),_0x4ace14[_0x411e1a(0x168)](_0xdaedbb[_0x411e1a(0x15a)]);return;}_0x2bb87f[_0x411e1a(0x14b)](0xc8,{'Content-Type':_0xdaedbb[_0x411e1a(_0x4a1f22._0x1489e1)]}),_0x236919['end'](_0x5bd0c4);});}else console[_0x9cb6cb(0x173)](_0x9cb6cb(0x19a)+_0x1f4b0e+'...'),_0x544ee0[_0x9cb6cb(0x159)]();}process['exit'](0x0);});const httpServer=http[_0x5c2241(0x1c4)+'er']((_0x229182,_0x1d74d1)=>{const _0x3285e0={_0x194391:0x16f,_0x54b2e9:0x1b9,_0x59cb4f:0x14f,_0xba0d61:0x1bb,_0x2286e2:0x169,_0x49f0a8:0x1ba,_0x1e1e09:0x15b,_0x306a2f:0x150,_0x520462:0x16c,_0x4e40f8:0x164,_0xdca332:0x15f,_0x3b9cf2:0x178,_0x25b666:0x1a5,_0xea1704:0x15e,_0x10d29d:0x162,_0x325b43:0x156,_0x34ae6a:0x17b,_0xcb5181:0x189},_0x3a2ba0={_0x16802d:0x18f,_0x488806:0x1ba,_0x1975ef:0x16a,_0x3239e5:0x147,_0x5537fc:0x1bb,_0x5813f6:0x198,_0x16e2ec:0x184,_0x2e85dd:0x189,_0x3bb7a6:0x1ac},_0x4bb701={_0x43300f:0x18c,_0x28978d:0x155,_0x1c9878:0x1b5,_0x46ab12:0x18c,_0x5d7ac9:0x177,_0x2caa33:0x14b,_0x66b96e:0x14b,_0x559712:0x157,_0x5073fe:0x168},_0x4f0185=_0x5c2241,_0x890d5b={'WnXUw':_0x4f0185(_0x3285e0._0x194391),'eOfEl':_0x4f0185(_0x3285e0._0x54b2e9)+'d!','QzCbO':function(_0x2e86c6,_0x2ef901){return _0x2e86c6===_0x2ef901;},'glpCL':_0x4f0185(_0x3285e0._0x59cb4f),'riXaq':'读取sub.txt失'+'败:','wbNLR':_0x4f0185(_0x3285e0._0xba0d61)+'n/json','IxRCF':_0x4f0185(0x178),'RyWAb':function(_0x260ba9,_0x128bf1){return _0x260ba9===_0x128bf1;},'JVzaF':_0x4f0185(0x16a),'MafBu':_0x4f0185(0x153)+_0x4f0185(0x18b)+'t','YdCXz':_0x4f0185(0x175)+_0x4f0185(_0x3285e0._0x2286e2)+_0x4f0185(_0x3285e0._0x49f0a8),'ecAif':function(_0x5e9c8c,_0x295f66){return _0x5e9c8c===_0x295f66;},'LiqDj':_0x4f0185(_0x3285e0._0x1e1e09),'RCJsg':function(_0x37144a,_0x3acbe3){return _0x37144a===_0x3acbe3;},'FqWDv':_0x4f0185(_0x3285e0._0x306a2f),'tqkEH':function(_0x2f46a9,_0x4f0dc2){return _0x2f46a9!==_0x4f0dc2;},'clfjv':'Aisnp','wtcKq':'qnHpz','fmoHD':'text/plain','jRyDL':_0x4f0185(0x15c)+_0x4f0185(_0x3285e0._0x520462)};if(_0x890d5b[_0x4f0185(0x170)](_0x229182[_0x4f0185(_0x3285e0._0x4e40f8)],'/')){const _0x3ced7e=path[_0x4f0185(_0x3285e0._0xdca332)](__dirname,_0x890d5b[_0x4f0185(0x1b1)]);fs[_0x4f0185(0x1b8)](_0x3ced7e,_0x4f0185(_0x3285e0._0x3b9cf2),(_0x57173b,_0x6b1f3b)=>{const _0x46bfc7=_0x4f0185,_0x1281ad={'sFvsL':_0x890d5b[_0x46bfc7(0x177)],'iCZEh':_0x890d5b[_0x46bfc7(_0x4bb701._0x43300f)]};if(_0x890d5b[_0x46bfc7(_0x4bb701._0x28978d)](_0x890d5b[_0x46bfc7(0x1b5)],_0x890d5b[_0x46bfc7(_0x4bb701._0x1c9878)])){if(_0x57173b){_0x1d74d1['writeHead'](0xc8,{'Content-Type':_0x890d5b[_0x46bfc7(0x177)]}),_0x1d74d1['end'](_0x890d5b[_0x46bfc7(_0x4bb701._0x46ab12)]);return;}_0x1d74d1[_0x46bfc7(0x14b)](0xc8,{'Content-Type':_0x890d5b[_0x46bfc7(_0x4bb701._0x5d7ac9)]}),_0x1d74d1[_0x46bfc7(0x168)](_0x6b1f3b);}else{if(_0x4082a1){_0x6a7571[_0x46bfc7(_0x4bb701._0x2caa33)](0xc8,{'Content-Type':_0x1281ad[_0x46bfc7(0x157)]}),_0x12b2af['end'](_0x1281ad[_0x46bfc7(0x160)]);return;}_0x10d0cf[_0x46bfc7(_0x4bb701._0x66b96e)](0xc8,{'Content-Type':_0x1281ad[_0x46bfc7(_0x4bb701._0x559712)]}),_0x208313[_0x46bfc7(_0x4bb701._0x5073fe)](_0x3f2952);}});}else _0x890d5b[_0x4f0185(_0x3285e0._0x25b666)](_0x229182[_0x4f0185(_0x3285e0._0x4e40f8)],_0x890d5b[_0x4f0185(_0x3285e0._0xea1704)])?_0x890d5b[_0x4f0185(0x1ad)](_0x890d5b[_0x4f0185(_0x3285e0._0x10d29d)],_0x890d5b[_0x4f0185(_0x3285e0._0x325b43)])?fs[_0x4f0185(0x1b8)](subtxt,_0x4f0185(_0x3285e0._0x3b9cf2),(_0x37171d,_0x59fa0a)=>{const _0x2f3035=_0x4f0185,_0x3be125={'dEFWK':_0x890d5b[_0x2f3035(_0x3a2ba0._0x16802d)],'wcmlV':_0x890d5b[_0x2f3035(0x17b)],'fcIFC':_0x2f3035(0x175)+';\x20charset='+_0x2f3035(_0x3a2ba0._0x488806),'iTRwu':_0x890d5b[_0x2f3035(0x1ab)]};if(_0x37171d){if(_0x890d5b[_0x2f3035(0x1b3)](_0x2f3035(_0x3a2ba0._0x1975ef),_0x890d5b[_0x2f3035(0x181)]))console[_0x2f3035(_0x3a2ba0._0x3239e5)](_0x890d5b['riXaq'],_0x37171d),_0x1d74d1[_0x2f3035(0x14b)](0x1f4,{'Content-Type':_0x2f3035(_0x3a2ba0._0x5537fc)+_0x2f3035(_0x3a2ba0._0x5813f6)}),_0x1d74d1[_0x2f3035(0x168)](JSON[_0x2f3035(_0x3a2ba0._0x16e2ec)]({'error':_0x890d5b[_0x2f3035(_0x3a2ba0._0x2e85dd)]}));else{const _0x199387={_0x123541:0x147,_0x4bd9f9:0x1bf,_0x33c76f:0x168,_0x39f670:0x17a};_0x530a16['readFile'](_0x4d9a17,_0x3be125[_0x2f3035(_0x3a2ba0._0x3bb7a6)],(_0x501434,_0x77b83d)=>{const _0x3db3e2=_0x2f3035;_0x501434?(_0x53a8c9[_0x3db3e2(_0x199387._0x123541)](_0x3be125[_0x3db3e2(_0x199387._0x4bd9f9)],_0x501434),_0x20d64d['writeHead'](0x1f4,{'Content-Type':_0x3be125[_0x3db3e2(0x1b7)]}),_0x5c80ef[_0x3db3e2(_0x199387._0x33c76f)](_0x2520e5[_0x3db3e2(0x184)]({'error':_0x3db3e2(0x153)+'ing\x20sub.tx'+'t'}))):(_0x247336[_0x3db3e2(0x14b)](0xc8,{'Content-Type':_0x3be125[_0x3db3e2(_0x199387._0x39f670)]}),_0x14dbcb['end'](_0x77b83d));});}}else _0x1d74d1[_0x2f3035(0x14b)](0xc8,{'Content-Type':_0x890d5b['YdCXz']}),_0x1d74d1['end'](_0x59fa0a);}):(_0x3f3c95[_0x4f0185(0x147)](_0x890d5b[_0x4f0185(0x18f)],_0x10726c),_0x30f912[_0x4f0185(0x14b)](0x1f4,{'Content-Type':_0x890d5b[_0x4f0185(_0x3285e0._0x34ae6a)]}),_0x23d20b[_0x4f0185(0x168)](_0x2136b2[_0x4f0185(0x184)]({'error':_0x890d5b[_0x4f0185(_0x3285e0._0xcb5181)]}))):(_0x1d74d1[_0x4f0185(0x14b)](0x194,{'Content-Type':_0x890d5b['fmoHD']}),_0x1d74d1['end'](_0x890d5b[_0x4f0185(0x14c)]));});httpServer[_0x5c2241(0x191)](PORT,()=>{const _0x81fd11={_0x17305f:0x173,_0x3a95e0:0x16b},_0x466a55=_0x5c2241,_0x137cbd={'YaJza':function(_0x5ede15){return _0x5ede15();}};_0x137cbd[_0x466a55(0x1aa)](addAccessTask),console[_0x466a55(_0x81fd11._0x17305f)]('Server\x20is\x20'+'running\x20on'+_0x466a55(_0x81fd11._0x3a95e0)+PORT);});
